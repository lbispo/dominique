let $=(d,f,g)=>{d=d||{};let h,j,l=new Map,m=d.constructor;if(m===String){d=document.querySelectorAll(d);for(let n=0;n<d.length;n++)l.set(n,d[n])}else if(m===Map)l=d;else if('function'==typeof d[Symbol.iterator])j=Array.from(d),j.forEach((n,o)=>{l.set(o,n)});else if(m===Object)for(h in d)l.set(h,d[h]);else if(m===Number)for(h=0;h<d;h++)l.set(h,h);else l.set(0,d);return f?[...l.keys()].map(n=>{return g&&g.call(l.get(n)),f(l.get(n),n)}).join(''):l},after=(d,f)=>{let g=new Set;return $(d,h=>{let j=h.nextElementSibling;j&&g.add(j)}),$(g,()=>{},f),g},attach=(d,f,g,h=!1,j=!1)=>{$(d,l=>{h&&h.constructor===String?l.addEventListener(f,function(m){m.target.matches(h)&&g.call(m.target,m)},j):l.addEventListener(f,g,h)})},before=(d,f)=>{let g=new Set;return $(d,h=>{let j=h.previousElementSibling;j&&g.add(j)}),$(g,()=>{},f),g},create=(d,f)=>{return''===d&&(d=!1),d=document.createElement(d),$(d,function(){},f),d},detach=(d,f,g)=>{$(d,h=>{h.removeEventListener(f,g)})},step=(d,f)=>{return d=$(d).get(0),d=d||{},$(d,()=>{},f),d},walk=(d,f)=>{let g=new Set;return $(d,h=>{h instanceof HTMLElement&&g.add(h)}),$(g,()=>{},f),g},attributes=(d,f)=>{$(d,g=>{$(f).forEach((h,j)=>{h=h.constructor===Function?h.call(g.attributes):h,!1===h?g.removeAttribute(j):g.setAttribute(j,h)})})},classes=(d,f)=>{$(d,g=>{$(f).forEach((h,j)=>{h=h.constructor===Function?h.call(g.classList):h,f.constructor===Array||f.constructor===Set?g.classList.add(h):h?!0===h?g.classList.add(j):h.constructor===Object?g.classList.toggle(j):g.classList.replace(j,h):g.classList.remove(j)})})},properties=(d,f)=>{$(d,g=>{$(f).forEach((h,j)=>{h=h.constructor===Function?h.call(g.dataset):h,g.dataset[j]=h})})},styles=(d,f)=>{$(d,g=>{$(f).forEach((h,j)=>{h=h.constructor===Function?h.call(g.style):h,!1===h?g.style.removeProperty(j):g.style[j]=h})})};