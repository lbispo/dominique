let $=(d,f,g)=>{d=d||{};let h,l,m,n=new Map,o=d.constructor;if(o===String){d=document.querySelectorAll(d);for(let p=0;p<d.length;p++)n.set(p,d[p])}else if(o===Map)n=d;else if('function'==typeof d[Symbol.iterator])m=Array.from(d),m.forEach((p,q)=>{n.set(q,p)});else if(o===Object||o===DOMStringMap)for(h in d)n.set(h,d[h]);else if(o===Number)for(h=0;h<d;h++)n.set(h,h);else n.set(0,d);return f?[...n.keys()].map(p=>{return l=n.get(p),g&&g.call(l,l),f(l,p)}).join(''):n},create=(d,f)=>{return''===d&&(d=!1),d=document.createElement(d),$(d,function(){},f),d},follows=(d,f)=>{let g=new Set;return $(d,h=>{let l=h.nextElementSibling;l&&g.add(l)}),$(g,()=>{},f),g},precedes=(d,f)=>{let g=new Set;return $(d,h=>{let l=h.previousElementSibling;l&&g.add(l)}),$(g,()=>{},f),g},step=(d,f)=>{return d=$(d).get(0),d=d||{},$(d,()=>{},f),d},walk=(d,f)=>{let g=new Set;return $(d,h=>{h instanceof HTMLElement&&g.add(h)}),$(g,()=>{},f),g},attach=(d,f,g,h=!1,l=!1)=>{$(d,m=>{h&&h.constructor===String?m.addEventListener(f,function(n){n.target.matches(h)&&g.call(n.target,n)},l):m.addEventListener(f,g,h)})},detach=(d,f,g)=>{$(d,h=>{h.removeEventListener(f,g)})},attributes=(d,f)=>{$(d,g=>{$(f).forEach((h,l)=>{h=h&&h.constructor===Function?h.call(g,g.attributes):h,!1===h?g.removeAttribute(l):g.setAttribute(l,h)})})},classes=(d,f)=>{$(d,g=>{$(f).forEach((h,l)=>{h=h&&h.constructor===Function?h.call(g,g.classList):h,f.constructor===Array||f.constructor===Set?g.classList.add(h):h?!0===h?g.classList.add(l):h.constructor===Object?g.classList.toggle(l):g.classList.replace(l,h):g.classList.remove(l)})})},properties=(d,f)=>{$(d,g=>{$(f).forEach((h,l)=>{h=h&&h.constructor===Function?h.call(g,g.dataset):h,g.dataset[l]=h})})},styles=(d,f)=>{$(d,g=>{$(f).forEach((h,l)=>{h=h&&h.constructor===Function?h.call(g,g.style):h,!1===h?g.style.removeProperty(l):g.style[l]=h})})};